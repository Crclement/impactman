import{E as l,b as i,G as u,H as m,I as d,o as s,a as r,u as g,p}from"./entry.85f4081b.js";import{_ as y}from"./_plugin-vue_export-helper.a1a6add7.js";const _=l("game",{state:()=>({sound:!0,global:{currentScore:0,currentLives:0,currentBags:0,eggBags:8,currentLevel:1,gameScreen:"loading"},leaderboard:[],unityInstance:null,allies:[]}),actions:{SendMessage(n){console.log("Sending message",n,this.unityInstance),this.unityInstance.SendMessage("GameManager","OnWebMessage",n)},StartGame(){this.unityInstance.SendMessage("StartManager","LoadGame")}},getters:{ticketsEarned(){return(this.global.currentScore*.01).toFixed(0)}}}),h={class:"rounded-lg unity-game relative w-full h-full bg-[#4D8BEC]"},b={key:0,id:"unity-canvas",class:"rounded-lg",width:"600",height:"664"},v=i({__name:"UnityGame",props:{game:null},setup(n){const a=_(),c=t=>{console.log("message",t);const e=JSON.parse(t);if(e.Event==="GlobalVariable")switch(e.Payload.Key){case"currentLevel":a.$patch({global:{currentLevel:parseInt(e.Payload.Value)}});break;case"currentScore":a.$patch({global:{currentScore:parseInt(e.Payload.Value)}});break;case"currentLives":a.$patch({global:{currentLives:parseInt(e.Payload.Value)}});break;case"gameScreen":a.$patch({global:{gameScreen:e.Payload.Value}});break;case"currentBags":a.$patch({global:{currentBags:parseInt(e.Payload.Value)}});break;case"eggBags":a.$patch({global:{eggBags:parseInt(e.Payload.Value)}});break}};u({script:[{src:"/unity/impactman/Build/impactman.loader.js",body:!0,onload:()=>{o()}}]}),m(async()=>{var t;await((t=a.unityInstance)==null?void 0:t.Quit())}),d(()=>{window.OnWebMessage=c,a.$patch({global:{gameScreen:"loading"}})});const o=async()=>{var t=document.createElement("meta");t.name="viewport",t.content="width=device-width, height=device-height, initial-scale=1.0, user-scalable=no, shrink-to-fit=yes",document.getElementsByTagName("head")[0].appendChild(t);const e=await createUnityInstance(document.querySelector("#unity-canvas"),{dataUrl:"/unity/impactman/Build/impactman.data",frameworkUrl:"/unity/impactman/Build/impactman.framework.js",codeUrl:"/unity/impactman/Build/impactman.wasm",streamingAssetsUrl:"/unity/impactman/StreamingAssets",companyName:"Dollar Donation Club",productName:"ImpactMan",productVersion:"1.0"});a.$patch({unityInstance:e})};return(t,e)=>(s(),r("div",h,[g(a).global.gameScreen!=="gameover"?(s(),r("canvas",b)):p("",!0)]))}});const f=y(v,[["__scopeId","data-v-683d15e6"]]);export{f as _,_ as u};
